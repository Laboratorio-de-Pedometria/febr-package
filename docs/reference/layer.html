<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get <em>layer</em> table — layer • febr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Get <em>layer</em> table — layer" />
<meta property="og:description" content="Download data from the layer (&quot;camada&quot;) table of one or more datasets contained in the Free Brazilian
Repository for Open Soil Data -- FEBR, https://www.pedometria.org/projeto/febr/. This includes
sampling depth, horizon designation, and variables such as pH, carbon content, clay content, and much more.
Use header if you want to check what are the variables contained in the layer table
of a dataset before downloading it." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">febr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/febr.html">Guia básico</a>
</li>
<li>
  <a href="../reference/index.html">Funções</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/samuel-rosa/febr-package">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get <em>layer</em> table</h1>
    <small class="dont-index">Source: <a href='https://github.com/samuel-rosa/febr-package/blob/master/R/layer.R'><code>R/layer.R</code></a></small>
    <div class="hidden name"><code>layer.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Download data from the <em>layer</em> ("camada") table of one or more datasets contained in the Free Brazilian
Repository for Open Soil Data -- FEBR, <a href='https://www.pedometria.org/projeto/febr/'>https://www.pedometria.org/projeto/febr/</a>. This includes
sampling depth, horizon designation, and variables such as pH, carbon content, clay content, and much more.
Use <code><a href='header.html'>header</a></code> if you want to check what are the variables contained in the <em>layer</em> table
of a dataset before downloading it.</p>
    </div>

    <pre class="usage"><span class='fu'>layer</span>(
  <span class='no'>dataset</span>,
  <span class='no'>variable</span>,
  <span class='kw'>stack</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>missing</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>depth</span> <span class='kw'>=</span> <span class='st'>"keep"</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='st'>"keep"</span>),
  <span class='kw'>standardization</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>plus.sign</span> <span class='kw'>=</span> <span class='st'>"keep"</span>, <span class='kw'>plus.depth</span> <span class='kw'>=</span> <span class='fl'>2.5</span>, <span class='kw'>lessthan.sign</span> <span class='kw'>=</span> <span class='st'>"keep"</span>,
    <span class='kw'>lessthan.frac</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>repetition</span> <span class='kw'>=</span> <span class='st'>"keep"</span>, <span class='kw'>combine.fun</span> <span class='kw'>=</span> <span class='st'>"mean"</span>, <span class='kw'>transition</span> <span class='kw'>=</span> <span class='st'>"keep"</span>,
    <span class='kw'>smoothing.fun</span> <span class='kw'>=</span> <span class='st'>"mean"</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>round</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>),
  <span class='kw'>harmonization</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>harmonize</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>2</span>),
  <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>febr.repo</span> <span class='kw'>=</span> <span class='st'>"remote"</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dataset</th>
      <td><p>Character vector indicating one or more datasets. Identification codes should be as recorded
in <a href='http://www.ufsm.br/febr/catalog/'>http://www.ufsm.br/febr/catalog/</a>. Use <code>dataset = "all"</code> to download all datasets.</p></td>
    </tr>
    <tr>
      <th>variable</th>
      <td><p>(optional) Character vector indicating one or more variables. Accepts only general
identification codes, e.g. <code>"ferro"</code> and <code>"carbono"</code>. If missing, then a set of standard identification
variables is downloaded. Use <code>variable = "all"</code> to download all variables. See &#8216;Details&#8217; for
more information.</p></td>
    </tr>
    <tr>
      <th>stack</th>
      <td><p>(optional) Logical value indicating if tables from different datasets should be stacked on a
single table for output. Requires <code>standardization = list(units = TRUE)</code> -- see below. Defaults to
<code>stack = FALSE</code>, the output being a list of tables.</p></td>
    </tr>
    <tr>
      <th>missing</th>
      <td><p>(optional) List with named sub-arguments indicating what should be done with a layer missing
data on sampling depth, <code>depth</code>, or data on variable(s), <code>data</code>. Options are <code>"keep"</code> (default) and
<code>"drop"</code>.</p></td>
    </tr>
    <tr>
      <th>standardization</th>
      <td><p>(optional) List with named sub-arguments indicating how to perform data
standardization.</p><ul>
<li><p><code>plus.sign</code> Character string indicating what should be done with the plus sign (<code>+</code>) commonly used
along with the inferior limit of the bottom layer of an observation. Options are <code>"keep"</code> (default),
<code>"add"</code>, and <code>"remove"</code>.</p></li>
<li><p><code>plus.depth</code> Numeric value indicating the depth increment (in centimeters) when processing the plus
sign (<code>+</code>) with <code>plus.sign = "add"</code>. Defaults to <code>plus.depth = 2.5</code>.</p></li>
<li><p><code>lessthan.sign</code> Character string indicating what should be done with the less-than sign (<code>&lt;</code>) used
to indicate that the value of a variable is below the lower limit of detection. Options are <code>"keep"</code>
(default), <code>"subtract"</code>, and <code>"remove"</code>.</p></li>
<li><p><code>lessthan.frac</code> Numeric value between 0 and 1 (a fraction) by which the lower limit of detection
should be subtracted when <code>lessthan.sign = "subtract"</code>. Defaults to <code>lessthan.frac = 0.5</code>, i.e.
subtract 50\<!-- % from the lower limit of detection. --></p></li>
<li><p><code>repetition</code> Character string indicating what should be done with repetitions, i.e. repeated
measurements of layers in an observation. Options are <code>"keep"</code> (default) and <code>"combine"</code>. In the
latter case, it is recommended to set <code>lessthan.sign = "subtract"</code> or <code>lessthan.sign = "remove"</code>.</p></li>
<li><p><code>combine.fun</code> Character string indicating the function that should be used to combine repeated
measurements of layers in an observation when <code>repetition = "combine"</code>. Options are <code>"mean"</code>
(default), <code>"min"</code>, <code>"max"</code>, and <code>"median"</code>.</p></li>
<li><p><code>transition</code> Character string indicating what should be done about the wavy and irregular
transition between subsequent layers in an observation. Options are <code>"keep"</code> (default) and
<code>"smooth"</code>.</p></li>
<li><p><code>smoothing.fun</code> Character string indicating the function that should be used to smooth wavy and
irregular transitions between subsequent layers in an observation when <code>transition = "smooth"</code>.
Options are <code>"mean"</code> (default), <code>"min"</code>, <code>"max"</code>, and <code>"median"</code>.</p></li>
<li><p><code>units</code> Logical value indicating if the measurement unit(s) of the continuous variable(s) should
be converted to the standard measurement unit(s). Defaults to <code>units = FALSE</code>, i.e. no conversion is
performed. See <code><a href='standard.html'>standard</a></code> for more information.</p></li>
<li><p><code>round</code> Logical value indicating if the values of the continuous variable(s) should be rounded
to the standard number of decimal places. Requires <code>units = TRUE</code>. Defaults to <code>round = FALSE</code>, i.e.
no rounding is performed. See <code><a href='standard.html'>standard</a></code> for more information.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>harmonization</th>
      <td><p>(optional) List with named sub-arguments indicating if and how to perform data
harmonization.</p><ul>
<li><p><code>harmonize</code> Logical value indicating if data should be harmonized. Defaults to <code>harmonize = FALSE</code>,
i.e. no harmonization is performed.</p></li>
<li><p><code>level</code> Integer value indicating the number of levels of the identification code of the variable(s)
that should be considered for harmonization. Defaults to <code>level = 2</code>. See &#8216;Details&#8217; for more
information.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>progress</th>
      <td><p>(optional) Logical value indicating if a download progress bar should be displayed.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>(optional) Logical value indicating if informative messages should be displayed. Generally
useful to identify datasets with inconsistent data. Please report to <a href='mailto:febr-forum@googlegroups.com'>febr-forum@googlegroups.com</a>
if you find any issue.</p></td>
    </tr>
    <tr>
      <th>febr.repo</th>
      <td><p>(optional) Character vector indicating where the data should be read. Defaults to
<code>febr.repo = "remote"</code>, i.e. the remote web server. Alternatively, a local directory path can be passed to
<code>febr.repo</code> if the user has a local copy of the data repository.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of data frames or a data frame with data on the chosen variable(s) of the chosen dataset(s).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <h3>Standard identification variables</h3>
    Standard identification variables and their content are as follows:
<ul>
<li><p><code>dataset_id</code>. Identification code of the dataset in the FEBR to which an observation belongs.</p></li>
<li><p><code>observacao_id</code>. Identification code of an observation in a dataset.</p></li>
<li><p><code>camada_id</code>. Sequential layer number, from top to bottom.</p></li>
<li><p><code>camada_nome</code>. Layer designation according to some standard description guide.</p></li>
<li><p><code>amostra_id</code>. Laboratory number of a sample.</p></li>
<li><p><code>profund_sup</code>. Upper boundary of a layer (cm).</p></li>
<li><p><code>profund_inf</code>. Lower boundary of a layer (cm).</p></li>
</ul>
Further details about the content of the standard identification variables can be found in
<a href='https://docs.google.com/document/d/1Bqo8HtitZv11TXzTviVq2bI5dE6_t_fJt0HE-l3IMqM'>https://docs.google.com/document/d/1Bqo8HtitZv11TXzTviVq2bI5dE6_t_fJt0HE-l3IMqM</a> (in Portuguese).
    <h3>Harmonization</h3>
    Data harmonization consists of converting the values of a variable determined using some method <em>B</em> so
that they are (approximately) equivalent to the values that would have been obtained if the standard method
<em>A</em> had been used instead. For example, converting carbon content values obtained using a wet digestion
method to the standard dry combustion method is data harmonization.
    A heuristic data harmonization procedure is implemented in the <strong>febr</strong> package. It consists of grouping
variables based on a chosen number of levels of their identification code. For example, consider a variable
with an identification code composed of four levels, <code>aaa_bbb_ccc_ddd</code>, where <code>aaa</code> is the first level and
<code>ddd</code> is the fourth level. Now consider a related variable, <code>aaa_bbb_eee_fff</code>. If the harmonization
is to consider all four coding levels (<code>level = 4</code>), then these two variables will remain coded as
separate variables. But if <code>level = 2</code>, then both variables will be re-coded as <code>aaa_bbb</code>, thus becoming the
same variable.
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Check the new core data download function <code><a href='readFEBR.html'>readFEBR()</a></code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='observation.html'>observation</a></code>, <code><a href='standard.html'>standard</a></code>, <code><a href='unit.html'>unit</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'>layer</span>(<span class='kw'>dataset</span> <span class='kw'>=</span> <span class='st'>"ctb0003"</span>)</div><div class='output co'>#&gt;   |                                                                              |                                                                      |   0%</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Downloading ctb0003-camada...</span></div><div class='output co'>#&gt;   |                                                                              |======================================================================| 100%</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Alessandro Samuel-Rosa <a href='mailto:alessandrosamuelrosa@gmail.com'>alessandrosamuelrosa@gmail.com</a></p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Alessandro Samuel-Rosa, Universidade Federal de Santa Maria, Universidade Tecnológica Federal do Paraná.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

